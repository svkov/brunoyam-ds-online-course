# Условная вероятность и теорема Байеса

До этого момента мы говорили о независимых событиях. То есть результат одного события не влиял на результат другого события. Однако в реальности такое бывает редко, поэтому давайте рассмотрим что будет, если два события будут зависимы.

## Условная вероятность

Для того, чтобы показать зависимость двух событий, используют понятие условной вероятности.

$P(B|A)$ - вероятность того, что произойдет событие $B$, если произошло событие $A$.

Допустим, мы знаем, что вероятность заболеть вирусом (событие $B$) для случайного человека $P(B)=0.001$, но если человек контактирует с другим зараженным человеком (событие $A$), то вероятность становится $P(B|A)=0.5$.

Также мы можем посчитать вероятность совместного наступления событий $A$ и $B$:

$$P(AB)=P(A)P(B|A)=P(B)P(B|A)$$

## Формула полной вероятности

Пусть событие $A$ осуществляется лишь при совершении одного из событий $B_1, B_2, ..., B_n$, причем сумма вероятностей $B_i$ равна 1. Иногда события $B_i$ называют гипотезами, и только одна из них окажется истинной.

Тогда вероятность события A будет равна

$$P(A) = P(B_1)P(A|B_1) + P(B_2)P(A|B_2) + ... + P(B_n)P(A|B_n)$$

## Задача 1

Имеются три одинаковые урны.

В первой урне находятся 4 белых и 7 черных шаров, во второй – только белые и в третьей – только черные шары.

Наудачу выбирается одна урна и из неё наугад извлекается шар.

Какова вероятность того, что этот шар чёрный?

Попробуйте решить самостоятельно, а потом посмотреть решение.

## Решение 1

У нас есть три гипотезы - может быть выбрана первая, вторая или третья урна, но заранее мы не знаем какая из них будет выбрана. Вероятность $P(B_1)=P(B_2)=P(B_3)=\frac{1}{3}$.

Посмотрим на вероятность вытянуть черный шар (событие $A$) для каждой из урн:

$$P(A|B_1) = \frac{7}{11}$$

$$P(A|B_2) = 0$$

$$P(A|B_3) = 1$$

А теперь вычислим вероятность $P(A)$ при помощи формулы полной вероятности:

$$
P(A) = P(B_1)P(A|B_1) + P(B_2)P(A|B_2) + P(B_3)P(A|B_3) = \\
= \frac{1}{3} * \frac{7}{11} + \frac{1}{3} * 0 + \frac{1}{3} * 1 = \frac{7}{33} + \frac{1}{3} = \frac{18}{33}
$$

## Теорема Байеса

Пусть событие $A$ произойдет с вероятность $P(A)$, а $B$ с вероятностью $P(B)$ и эти события зависимы.

Вспомним, что мы посчитали вероятность их совместного наступления:

$$P(AB)=P(A)P(B|A)=P(B)P(B|A)$$

Отсюда мы можем выразить вероятность $P(A|B)$:

$$P(A|B) = \frac{P(B|A)  P(A)}{P(B)}$$

И получим **формулу Байеса**. Благодаря этой формуле мы можем поменять местами "причину" и "следствие". Ниже разобран пример на применение теоремы Байеса.

$P(B)$ обычно считаем по формуле полной вероятности

## Задача 2

На склад поступило 2 партии изделий: первая – 4000 штук, вторая – 6000 штук.

Средний процент нестандартных изделий в первой партии составляет 20%, а во второй – 10%.

Наудачу взятое со склада изделие оказалось стандартным. Найти вероятность того, что оно:

а) из первой партии

б) из второй партии.

## Решение 2

Всего на складе 10000 изделий.

Тогда

$P(B_1)=0.4$

$P(B_2)=0.6$

Пусть, $A$ - наудачу взятое изделие оказалось стандартным

$P(A|B_1) = 1 - 0.2 = 0.8$

$P(A|B_2) = 1 - 0.1 = 0.9$

$P(A) = P(B_1)P(A|B_1) + P(B_2)P(A|B_2) = 0.86$

Остается применить формулу Байеса:

$P(B_1|A) - ?$

$P(B_2|A) - ?$
