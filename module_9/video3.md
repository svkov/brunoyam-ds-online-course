# ЦПТ и ЗБЧ

Для начала давайте проверим закон больших чисел. Будем генерировать из нормального распределения выборку, и проверять, насколько далеко выборочное среднее находится от матожидания.

Благодаря этой теореме мы связываем статистику и теорию вероятности. Если бы она не работала, мы бы не могли быть уверены, что при увеличении выборки мы получим более достоверные результаты.

Также из закона больших чисел следует, что если мы будем бесконечно генерировать выборки из этого распределения, то мы рано или поздно получим выборки, вообще не похожие на исходное распределение, но таких выборок будет мало.

Суть центральной предельной теоремы немного сложнее. Как мы помним, при проверке гипотез и построении доверительных интервалов мы часто делаем предположение, что распределение нормальное, но в реальности нормальные распределения встречаются далеко не всегда. ЦПТ позволяет нам приводить любое распределение к нормальному.

Давайте проведем такой эксперимент - сгенерируем две выборки размером 50 из двух разных распределений. Мы уже знаем, что тест Стьюдента будет плохо работать на таких выборках, а критерий Манна-Уитни получше, но может быть мы можем что-то сделать с данными, чтобы все-таки использовать критерий Стьюдента? Давайте применим ЦПТ и будем брать из обеих выборок подвыборки, а затем считать среднее для каждой из таких выборок. А далее сформируем новую выборку из разниц между средними. Если нулевая гипотеза верна и матожидания исходных распределений были равны, то матожидание разниц этих величин должно быть равно 0. Также мы знаем, что из-за ЦПТ новая величина будет распределена нормально из-за принципа своего построения. Значит, мы можем при помощи теста Стьюдента сравнить среднее значение с нулем. Давайте посчитаем pvalue.

Как видим, при помощи несложных манипуляций мы однозначно определились, у какой выборки среднее значение все-таки больше. Такой подход для проверки гипотез называется **бутстрап** и часто используется на практике для того, чтобы проверить гипотезы. Однако этот тест не будет работать, если выборка нерепрезентативна. Также этот тест будет работать очень долго, если данных будет много.
