# Видео 3

Давайте посмотрим на код и поймем как его можно упростить.

```python
a = [-1, 89, 55, -432, 22, -2, -3]

sum1 = 0
for i in a:
    if i < 0:
        sum1 += abs(i)


b = [321, 123, 0, 55, -1, -2, -3]

sum2 = 0
for i in b:
    if i < 0:
        sum2 += abs(i)
```

Кажется, что эти два куска кода очень похожи. Вот бы был способ не копировать код, а написать его один раз, а потом вызывать из одного и того же места. И такой способ есть - нужно использовать функции. Функции в программировании очень похожи на функции в математике - они что-то принимают на вход и что-то отдают на выходе. В нашем случае на входе у нас будет список, а на выходе сумма модулей отрицательных элементов.

```python
def sum_of_negatives(x):
    result = 0
    for i in x:
        if i < 0:
            result += abs(i)
    return result
```

Запустили ячейку и ничего не произошло. Функцию нужно вызвать.

```python
a = [-1, 89, 55, -432, 22, -2, -3]
b = [321, 123, 0, 55, -1, -2, -3]

print(sum_of_negatives(a))
print(sum_of_negatives(b))
```

Код стал сильно меньше.

В чем проблема с копированием и вставкой кода? Давайте представим, что мы написали небольшой проект на пару тысяч строк кода, не используя функции, либо используя их по минимуму. Наверняка, много кода дублируется и делает примерно одно и то же. Что может пойти не так? Во-первых, вы могли скопировать что-то с ошибкой. Например, забыть поменять где-то название переменной. На первый взгляд даже при тестировании может показаться, что все в порядке, но пользователи обязательно наткнутся на ошибку.  Во-вторых, представьте, что ваш код хорошо работает для 99% случаев входных данных, а вот последний процент вы не догадались проверить. Например, на вход вам передали пустую строку и из-за этого программа падает. Либо где-то при делении возникает 0 и также появляется ошибка. Такие ошибки происходят постоянно, в них нет ничего страшного, если вовремя их отловить и исправить. Но если этот кусочек кода вы скопировали 10 раз в разные части программы, то вы не вспомните куда именно вы его скопировали, а даже если вспомните все такие места, то все еще можете исправить с ошибкой из пункта выше.

Кажется, нет никаких причин не использовать функции. Это упрощает жизнь.

Функции должны быть максимально атомарны. Если вы взяли программу на 1000 строк и разбили ее на три функции по 300 строк, и еще 100 строк оставили вне функций, то вы никак не исправили ситуацию. Раньше, когда мониторы были меньше, было популярно правило, что функция должна помещаться на экране. Сейчас вы можете писать код хоть на телевизоре с разрешением в 8к, поэтому лучше просто запомнить, что функции должны быть настолько маленькими, насколько возможно.

Еще один побочный плюс функций - они документируют ваш код, если вы их осмысленно называете. Давайте посмотрим на код ниже

```python
def f1(x, y):
    z = []
    for i in range(min(len(x), len(y))):
        z.append(x[i] * y[i])
    return z

def f2(x):
    z_ = 0
    for i in x:
        z_ = z_ + i
    return z_

a = [1, 2, 3]
b = [3, 2, 1]
f2(f1(a, b))
```

Можно поменять названия и сразу станет приятнее и понятнее.

```python
def product_of_lists(list1, list2):
    result_list = []
    min_len_of_lists = min(len(list1), len(list2))
    for i in range(min_len_of_lists):
        product = list1[i] * list2[i]
        result_list.append(product)
    return result_list

a = [1, 2, 3]
b = [3, 2, 1]
sum(product_of_lists(a, b))
```

Хороший код - самодокументируемый код. Ну и желательно, чтобы там было минимальное количество ошибок.
